// SAMPSRV (adding this just as a tag for next RakNet upgrade)
BitStream::BitStream(RPCParameters* pParams, bool _copyData)
{
	numberOfBitsUsed = numberOfBitsAllocated = pParams->numberOfBitsOfData;
	readOffset = 0;
	copyData = _copyData;

	if (copyData)
	{
		BitSize_t lengthInBytes = BITS_TO_BYTES(pParams->numberOfBitsOfData);
		if (lengthInBytes > 0)
		{
			if (lengthInBytes < BITSTREAM_STACK_ALLOCATION_SIZE)
			{
				data = (unsigned char*)stackData;
				numberOfBitsAllocated = BITSTREAM_STACK_ALLOCATION_SIZE << 3;
			}
			else
			{
				data = (unsigned char*)malloc((size_t)lengthInBytes);
			}
			RakAssert(data);
			memcpy(data, pParams->input, (size_t)lengthInBytes);
		}
		else
			data = 0;
	}
	else
		data = (unsigned char*)pParams->input;
}

BitStream::BitStream(Packet* pPacket, bool _copyData)
{
	numberOfBitsUsed = numberOfBitsAllocated = pPacket->bitSize;
	readOffset = 0;
	copyData = _copyData;

	if (copyData)
	{
		BitSize_t lengthInBytes = BITS_TO_BYTES(pPacket->bitSize);
		if (lengthInBytes > 0)
		{
			if (lengthInBytes < BITSTREAM_STACK_ALLOCATION_SIZE)
			{
				data = (unsigned char*)stackData;
				numberOfBitsAllocated = BITSTREAM_STACK_ALLOCATION_SIZE << 3;
			}
			else
			{
				data = (unsigned char*)malloc((size_t)lengthInBytes);
			}
			RakAssert(data);
			memcpy(data, pPacket->data, (size_t)lengthInBytes);
		}
		else
			data = 0;
	}
	else
		data = (unsigned char*)pPacket->data;
}
// SAMPSRV end


	// SAMPSRV (adding this just as a tag for next RakNet upgrade)
		BitStream(RPCParameters* pParams, bool _copyData = false);
		BitStream(Packet* pPacket, bool _copyData = false);
		// SAMPSRV end
